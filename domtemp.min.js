/*! domtemp @version 1.0.1 2013-04-09 */
/* @author: Li Chang Wei <lichangwei@love.com> */
/* @see https://github.com/lichangwei/domtemp */
(function(){"use strict";function e(e,t,n){var i;"undefined"!=typeof jQuery&&t instanceof jQuery&&(t=t[0]),"string"==typeof t?(a.innerHTML=t,i=t,t=a.children[0],a.removeChild(t)):t.outerHTML?i=t.outerHTML:(a.innerHTML="",a.appendChild(t),i=a.innerHTML),e.node=t,e.opts=n,e.html=i,e.handlers=[]}function t(e,t){if(1===t.nodeType){for(var i=!0,r=0;l.length>r;r++){var o=l[r](e,t);o===!1&&(i=!1)}i&&n(e,t)}}function n(e,n){for(var i=n.children,r=0;i.length>r;r++)t(e,i[r])}function i(e,t){if(!e||!t)return null;var n,i=t.split("."),r=e;for(n=0;r&&i.length>n;n++)i[n]&&(r=r[i[n]]);return r}function r(e,t,n){if(e&&t){for(var i=t.split("."),r=e,o=0,s=i.length;s-1>o;o++)i[o]&&(r[i[o]]=r[i[o]]||{},r=r[i[o]]);r[i[s-1]]=n}return e}function o(e,t){e||(e={});for(var n in t)e[n]="object"==typeof e[n]&&"object"==typeof t[n]?o(e[n],t[n]):t[n];return e}var s=window.dt=function(n,i){return this instanceof s?(e(this,n,i||{}),t(this,this.node,this.placeholders),void 0):new s(n,i)};s.regexp=/\{\{\s*([\w\d\.]+)\s*:?\s*([^}]*)\}\}/gi,s.scanners=[],s.isIE=navigator.userAgent.indexOf("MSIE")>=0,s.convert=function(e,t){return Function("val","return "+t)},s.getValue=function(e,t,n,r,o){var s=o[t];s||(s=o[t]=i(r,t));var a=e.opts[t];return"function"==typeof a?s=a(s,r):void 0!==a&&(s=a),n&&(s=n(s)),s},s.hideNode=function(e){e._parent||(e._parent=e.parentNode),e._parent&&(e._replace||(e._replace=document.createElement("p")),e._parent.replaceChild(e._replace,e))},s.showNode=function(e){e._parent&&e._replace&&e._parent.replaceChild(e,e._replace)},s.prototype={fill:function(e,t){this.data=t&&this.data?o(this.data,e):e,this.hide();for(var n=0,i=this.handlers.length;i>n;n++){var r=this.handlers[n];r.fill(this.data,{})}return this.show()},append:function(e){return this.fill(e,!0)},fetch:function(){for(var e={},t=0,n=this.handlers.length;n>t;t++){var i=this.handlers[t];i.fetch&&r(e,i.field,i.fetch())}return e},clear:function(){this.data&&(this.data.length=0),this.hide();for(var e=0,t=this.handlers.length;t>e;e++){var n=this.handlers[e];n.clear()}return this.show()},hide:function(){return s.hideNode(this.node),this},show:function(){return s.showNode(this.node),this}};var a=document.createElement("body"),l=s.scanners})(),function(e){"use strict";function t(e,t){var r=o?t.dataset:i(t);for(var s in r){var a=r[s];if("string"==typeof a){var l=n(e,t,s,r[s]);l&&(t.removeAttribute("data-"+s),e.handlers.push(l))}}}function n(t,n,i,r){var o=[];if(r.replace(e.regexp,function(t,n,i){o.push({field:n,match:t,convert:i?e.convert(n,i):void 0})}),0!==o.length){var a={fill:function(t,s){for(var a=r,l=0;o.length>l;l++){var c=o[l],h=e.getValue(this.template,c.field,c.convert,t,s);a=a.replace(c.match,h)}this.setAttribute(n,i,a)},clear:function(){this.setAttribute(n,i,"")},setAttribute:s[i]||s["*"],template:t};return a}}function i(e){for(var t=e.attributes,n={},i=0,r=t.length;r>i;i++){var o=t[i],s=o.nodeName;0===s.indexOf("data-")&&(n[s.substr(5)]=o.nodeValue)}return n}e.scanners.push(t);var r=document.documentElement,o=!!r.dataset,s={value:"innerHTML"in r?function(e,t,n){e.innerHTML=n}:function(e,t,n){e.textContent=n},style:function(e,t,n){e.style.cssText=n},"class":function(e,t,n){e.className=n},indom:function(t,n,i){i?e.showNode(t):e.hideNode(t)},display:function(e,t,n){e.style.display=n?"block":"none"},"*":function(e,t,n){e.setAttribute(t,n)}}}(dt),function(e){"use strict";function t(e,t){if(n(t)){var i=t.name;if(i){for(var r,s=t.type,a=t.getAttribute("number"),l=e.handlers,c=0;l.length>c;c++)l[c].field===i&&l[c].type===s&&(r=l[c]);r||(r=new(o[s]||o.normal),r.field=i,r.type=s,r.template=e,e.handlers.push(r)),r.isNum=r.isNum||"number"===s||"range"===s||null!==a,"radio"===s||"checkbox"===s?(r.nodes||(r.nodes=[]),r.nodes.push(t)):r.nodes=t}}}function n(e){if(!e.tagName)return!1;var t=e.tagName.toLowerCase();return-1!=="input textarea select".indexOf(t)&&-1==="image file button reset submit".indexOf(e.type)}function i(e,t){return t&&(e=parseInt(e,10)),e!==e?0/0:e}function r(e){return e&&"[object Array]"===Object.prototype.toString.call(e)}e.scanners.push(t);var o={};o.normal=function(){},o.normal.prototype={fill:function(t,n){var i=e.getValue(this.template,this.field,null,t,n);this.nodes.value=i||""},clear:function(){this.nodes.value=""},fetch:function(){return i(this.nodes.value,this.isNum)}},o.radio=function(){},o.radio.prototype={fill:function(t,n){for(var i=e.getValue(this.template,this.field,null,t,n),r=this.nodes,o=r.length,s=""+i,a=0;o>a;a++)r[a].checked=!1,r[a].value===s&&(r[a].checked=!0)},clear:function(){for(var e=this.nodes,t=e.length,n=0;t>n;n++)e[n].checked=!1},fetch:function(){for(var e=this.nodes,t=e.length,n=0;t>n;n++)if(e[n].checked)return i(e[n].value,this.isNum)}},o.checkbox=function(){},o.checkbox.prototype={fill:function(t,n){var i=e.getValue(this.template,this.field,null,t,n),o=this.nodes,s=o.length;r(i)||(i=[i]);for(var a=0;s>a;a++){o[a].checked=!1;for(var l=0;i&&i.length>l;l++)o[a].value===""+i[l]&&(o[a].checked=!0)}},clear:function(){for(var e=this.nodes,t=e.length,n=0;t>n;n++)e[n].checked=!1},fetch:function(){for(var e=this.nodes,t=e.length,n=[],r=0;t>r;r++)e[r].checked&&n.push(i(e[r].value,this.isNum));return 1===t?n[0]:n}},o["select-multiple"]=function(){},o["select-multiple"].prototype={fill:function(t,n){for(var i=e.getValue(this.template,this.field,null,t,n),r=this.nodes.children,o=r.length,s=0;o>s;s++){r[s].setAttribute("selected",""),r[s].selected=!1;for(var a=0;i&&i.length>a;a++)r[s].value===i[a]&&(r[s].setAttribute("selected","true"),r[s].selected=!0)}},clear:function(){for(var e=this.nodes.children,t=e.length,n=0;t>n;n++)e[n].setAttribute("selected",""),e[n].selected=!1},fetch:function(){for(var e=this.nodes.children,t=e.length,n=[],r=0;t>r;r++)e[r].selected&&n.push(i(e[r].value,this.isNum));return n}}}(dt),function(e){"use strict";function t(e,t){var i=t.getAttribute("data-each");if(i)return e.handlers.push({template:e,node:t,fill:n.fill,clear:n.clear,field:i,item:t.children[0],empty:t.children[1],items:[]}),t.innerHTML="",t.removeAttribute("data-each"),!1}e.scanners.push(t);var n={fill:function(t,n){this.clear();var i=e.getValue(this.template,this.field,null,t,n);if(i&&0!==i.length)for(var r=0,o=i.length;o>r;r++){var s=this.items[r];s||(s=this.items[r]=e(this.item.cloneNode(!0),this.template.opts)),s.fill(i[r]),this.node.appendChild(s.node)}else this.empty&&this.node.appendChild(this.empty)},clear:function(){this.node.innerHTML=""}}}(dt);
//@ sourceMappingURL=domtemp.min.js.map