/*! domtemp @version 1.0.3 2013-04-11 */
/* @author: Li Chang Wei <lichangwei@love.com> */
/* @see https://github.com/lichangwei/domtemp */
(function(){"use strict";function e(e,t,n){"undefined"!=typeof jQuery&&t instanceof jQuery&&(t=t[0]),"string"==typeof t&&(t=document.querySelector(t)),e.node=t,e.opts=n,e.handlers=[]}function t(e,t){if(1===t.nodeType){for(var i=!0,r=0;l.length>r;r++){var o=l[r](e,t);o===!1&&(i=!1)}i&&n(e,t)}}function n(e,n){for(var i=n.children,r=0;i.length>r;r++)t(e,i[r])}function i(e,t){if(!e||!t)return null;var n,i=t.split("."),r=e;for(n=0;r&&i.length>n;n++)i[n]&&(r=r[i[n]]);return r}function r(e,t,n){if(e&&t){for(var i=t.split("."),r=e,o=0,s=i.length;s-1>o;o++)i[o]&&(r[i[o]]=r[i[o]]||{},r=r[i[o]]);r[i[s-1]]=n}return e}function o(e,t){e||(e={});for(var n in t)e[n]="object"==typeof e[n]&&"object"==typeof t[n]?o(e[n],t[n]):t[n];return e}var s=window.dt=function(n,i){return this instanceof s?(e(this,n,i||{}),t(this,this.node,this.placeholders),void 0):new s(n,i)};s.regexp=/\{\{\s*([\w\d\.]+)\s*:?\s*([^}]*)\}\}/gi,s.scanners=[];var a=s.util={getValue:function(e,t,n,r,o){var s=o[t];s||(s=o[t]=i(r,t));var a=e.opts[t];return"function"==typeof a?s=a(s,r):void 0!==a&&(s=a),n&&(s=n(s)),s},convert:function(e,t){return Function("val","return "+t)},hideNode:function(e){e._parent||(e._parent=e.parentNode),e._parent&&(e._replace||(e._replace=document.createTextNode("")),e._parent.replaceChild(e._replace,e))},showNode:function(e){e._parent&&e._replace&&e._parent.replaceChild(e,e._replace)}};s.prototype={fill:function(e,t){this.data=t&&this.data?o(this.data,e):e,this.hide();for(var n=0,i=this.handlers.length;i>n;n++){var r=this.handlers[n];r.fill(this.data,{})}return this.show()},append:function(e){return this.fill(e,!0)},fetch:function(){for(var e={},t=0,n=this.handlers.length;n>t;t++){var i=this.handlers[t];i.fetch&&r(e,i.field,i.fetch())}return e},clear:function(){this.data&&(this.data.length=0),this.hide();for(var e=0,t=this.handlers.length;t>e;e++){var n=this.handlers[e];n.clear()}return this.show()},hide:function(){return a.hideNode(this.node),this},show:function(){return a.showNode(this.node),this}},document.createElement("body");var l=s.scanners})(),function(e,t){"use strict";function n(e,t){var n=s?t.dataset:r(t);for(var o in n){var a=n[o];if("string"==typeof a){var l=i(e,t,o,n[o]);l&&(t.removeAttribute("data-"+o),e.handlers.push(l))}}}function i(n,i,r,o){var s=[];if(o.replace(e.regexp,function(e,n,i){s.push({field:n,match:e,convert:i?t.convert(n,i):void 0})}),0!==s.length){var l={fill:function(e,n){for(var a=o,l=0;s.length>l;l++){var u=s[l],c=t.getValue(this.template,u.field,u.convert,e,n);a=a.replace(u.match,c)}this.setAttribute(i,r,a)},clear:function(){this.setAttribute(i,r,"")},setAttribute:a[r]||a["*"],template:n};return l}}function r(e){for(var t=e.attributes,n={},i=0,r=t.length;r>i;i++){var o=t[i],s=o.nodeName;0===s.indexOf("data-")&&(n[s.substr(5)]=o.nodeValue)}return n}e.scanners.push(n);var o=document.documentElement,s=!!o.dataset,a=e.attributeSetter={value:"innerHTML"in o?function(e,t,n){e.innerHTML=n}:function(e,t,n){e.textContent=n},style:function(e,t,n){e.style.cssText=n},"class":function(e,t,n){e.className=n},indom:function(e,n,i){"true"===i?t.showNode(e):t.hideNode(e)},display:function(e,t,n){e.style.display="true"===n?"":"none"},"*":function(e,t,n){e.setAttribute(t,n)}}}(dt,dt.util),function(e,t){"use strict";function n(e,t){if(i(t)){var n=t.name;if(n){for(var r,o=t.type,a=t.getAttribute("number"),l=e.handlers,u=0;l.length>u;u++)l[u].field===n&&l[u].type===o&&(r=l[u]);r||(r=new(s[o]||s.normal),r.field=n,r.type=o,r.template=e,e.handlers.push(r)),r.isNum=r.isNum||"number"===o||"range"===o||null!==a,"radio"===o||"checkbox"===o?(r.nodes||(r.nodes=[]),r.nodes.push(t)):r.nodes=t}}}function i(e){if(!e.tagName)return!1;var t=e.tagName.toLowerCase();return-1!=="input textarea select".indexOf(t)&&-1==="image file button reset submit".indexOf(e.type)}function r(e,t){return t&&(e=parseInt(e,10)),e!==e?0/0:e}function o(e){return e&&"[object Array]"===Object.prototype.toString.call(e)}e.scanners.push(n);var s={};s.normal=function(){},s.normal.prototype={fill:function(e,n){var i=t.getValue(this.template,this.field,null,e,n);this.nodes.value=i||""},clear:function(){this.nodes.value=""},fetch:function(){return r(this.nodes.value,this.isNum)}},s.radio=function(){},s.radio.prototype={fill:function(e,n){for(var i=t.getValue(this.template,this.field,null,e,n),r=this.nodes,o=r.length,s=""+i,a=0;o>a;a++)r[a].checked=!1,r[a].value===s&&(r[a].checked=!0)},clear:function(){for(var e=this.nodes,t=e.length,n=0;t>n;n++)e[n].checked=!1},fetch:function(){for(var e=this.nodes,t=e.length,n=0;t>n;n++)if(e[n].checked)return r(e[n].value,this.isNum)}},s.checkbox=function(){},s.checkbox.prototype={fill:function(e,n){var i=t.getValue(this.template,this.field,null,e,n),r=this.nodes,s=r.length;o(i)||(i=[i]);for(var a=0;s>a;a++){r[a].checked=!1;for(var l=0;i&&i.length>l;l++)r[a].value===""+i[l]&&(r[a].checked=!0)}},clear:function(){for(var e=this.nodes,t=e.length,n=0;t>n;n++)e[n].checked=!1},fetch:function(){for(var e=this.nodes,t=e.length,n=[],i=0;t>i;i++)e[i].checked&&n.push(r(e[i].value,this.isNum));return 1===t?n[0]:n}},s["select-multiple"]=function(){},s["select-multiple"].prototype={fill:function(e,n){for(var i=t.getValue(this.template,this.field,null,e,n),r=this.nodes.children,o=r.length,s=0;o>s;s++){r[s].setAttribute("selected",""),r[s].selected=!1;for(var a=0;i&&i.length>a;a++)r[s].value===i[a]&&(r[s].setAttribute("selected","true"),r[s].selected=!0)}},clear:function(){for(var e=this.nodes.children,t=e.length,n=0;t>n;n++)e[n].setAttribute("selected",""),e[n].selected=!1},fetch:function(){for(var e=this.nodes.children,t=e.length,n=[],i=0;t>i;i++)e[i].selected&&n.push(r(e[i].value,this.isNum));return n}}}(dt,dt.util),function(e,t){"use strict";function n(e,t){var n=t.getAttribute("data-each");if(n){e.handlers.push({template:e,node:t,fill:i.fill,clear:i.clear,field:n,item:t.children[0],empty:t.children[1],items:[]});var r=document.createRange();return r.selectNodeContents(t),r.deleteContents(),t.removeAttribute("data-each"),!1}}e.scanners.push(n);var i={fill:function(n,i){this.clear();var r=t.getValue(this.template,this.field,null,n,i);if(r&&0!==r.length)for(var o=0,s=r.length;s>o;o++){var a=this.items[o];a||(a=this.items[o]=e(this.item.cloneNode(!0),this.template.opts)),a.fill(r[o]),this.node.appendChild(a.node)}else this.empty&&this.node.appendChild(this.empty)},clear:function(){this.node.innerHTML=""}}}(dt,dt.util);
//@ sourceMappingURL=domtemp.min.js.map