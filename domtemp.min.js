/*! domtemp @version 1.0.1 2013-04-09 */
/* @author: Li Chang Wei <lichangwei@love.com> */
/* @see https://github.com/lichangwei/domtemp */
(function(){"use strict";function e(e,t,n){var r;"undefined"!=typeof jQuery&&t instanceof jQuery&&(t=t[0]),"string"==typeof t?(l.innerHTML=t,r=t,t=l.children[0],l.removeChild(t)):t.outerHTML?r=t.outerHTML:(l.innerHTML="",l.appendChild(t),r=l.innerHTML),e.node=t,e.opts=n,e.html=r,e.handlers=[]}function t(e,t){if(1===t.nodeType){for(var r=!0,i=0;o.length>i;i++){var a=o[i](e,t);a===!1&&(r=!1)}r&&n(e,t)}}function n(e,n){for(var r=n.children,i=0;r.length>i;i++)t(e,r[i])}function r(e,t){if(!e||!t)return null;var n,r=t.split("."),i=e;for(n=0;i&&r.length>n;n++)r[n]&&(i=i[r[n]]);return i}function i(e,t,n){if(e&&t){for(var r=t.split("."),i=e,a=0,s=r.length;s-1>a;a++)r[a]&&(i[r[a]]=i[r[a]]||{},i=i[r[a]]);i[r[s-1]]=n}return e}function a(e,t){e||(e={});for(var n in t)e[n]="object"==typeof e[n]&&"object"==typeof t[n]?a(e[n],t[n]):t[n];return e}var s=window.dt=function(n,r){return this instanceof s?(e(this,n,r||{}),t(this,this.node,this.placeholders),void 0):new s(n,r)};s.regexp=/\{\{\s*([\w\d\.]+)\s*:?\s*([^}]*)\}\}/gi,s.scanners=[],s.isIE=navigator.userAgent.indexOf("MSIE")>=0,s.convert=function(e,t){return Function("val","return "+t)},s.getValue=function(e,t,n,i,a){var s=a[t];s||(s=a[t]=r(i,t));var l=e.opts[t];return"function"==typeof l?s=l(s,i):void 0!==l&&(s=l),n&&(s=n(s)),s},s.prototype={fill:function(e,t){this.data=t&&this.data?a(this.data,e):e,this.hide();for(var n=0,r=this.handlers.length;r>n;n++){var i=this.handlers[n];i.fill(this.data,{})}return this.show()},append:function(e){return this.fill(e,!0)},fetch:function(){for(var e={},t=0,n=this.handlers.length;n>t;t++){var r=this.handlers[t];r.fetch&&i(e,r.field,r.fetch())}return e},clear:function(){this.data&&(this.data.length=0),this.hide();for(var e=0,t=this.handlers.length;t>e;e++){var n=this.handlers[e];n.clear()}return this.show()},hide:function(){var e=this.node;return e._parent||(e._parent=e.parentNode),e._parent?(e._replace||(e._replace=document.createElement("p")),e._parent.replaceChild(e._replace,e),this):this},show:function(){var e=this.node;return e._parent&&e._replace&&e._parent.replaceChild(e,e._replace),this}};var l=document.createElement("body"),o=s.scanners})(),function(e){"use strict";function t(e,t){var i=a?t.dataset:r(t);for(var s in i){var l=i[s];if("string"==typeof l){var o=n(e,t,s,i[s]);o&&(t.removeAttribute("data-"+s),e.handlers.push(o))}}}function n(t,n,r,i){var a=[];if(i.replace(e.regexp,function(t,n,r){a.push({field:n,match:t,convert:r?e.convert(n,r):void 0})}),0!==a.length){var l={fill:function(t,s){for(var l=i,o=0;a.length>o;o++){var c=a[o],u=e.getValue(this.template,c.field,c.convert,t,s);l=l.replace(c.match,u)}this.setAttribute(n,r,l)},clear:function(){this.setAttribute(n,r,"")},setAttribute:s[r]||s["*"],template:t};return l}}function r(e){for(var t=e.attributes,n={},r=0,i=t.length;i>r;r++){var a=t[r],s=a.nodeName;0===s.indexOf("data-")&&(n[s.substr(5)]=a.nodeValue)}return n}e.scanners.push(t);var i=document.documentElement,a=!!i.dataset,s={value:"innerHTML"in i?function(e,t,n){e.innerHTML=n}:function(e,t,n){e.textContent=n},style:function(e,t,n){e.style.cssText=n},"class":function(e,t,n){e.className=n},"*":function(e,t,n){e.setAttribute(t,n)}}}(dt),function(e){"use strict";function t(e,t){if(n(t)){var r=t.name;if(r){for(var i,s=t.type,l=t.getAttribute("number"),o=e.handlers,c=0;o.length>c;c++)o[c].field===r&&o[c].type===s&&(i=o[c]);i||(i=new(a[s]||a.normal),i.field=r,i.type=s,i.template=e,e.handlers.push(i)),i.isNum=i.isNum||"number"===s||"range"===s||null!==l,"radio"===s||"checkbox"===s?(i.nodes||(i.nodes=[]),i.nodes.push(t)):i.nodes=t}}}function n(e){if(!e.tagName)return!1;var t=e.tagName.toLowerCase();return-1!=="input textarea select".indexOf(t)&&-1==="image file button reset submit".indexOf(e.type)}function r(e,t){return t&&(e=parseInt(e,10)),e!==e?0/0:e}function i(e){return e&&"[object Array]"===Object.prototype.toString.call(e)}e.scanners.push(t);var a={};a.normal=function(){},a.normal.prototype={fill:function(t,n){var r=e.getValue(this.template,this.field,null,t,n);this.nodes.value=r||""},clear:function(){this.nodes.value=""},fetch:function(){return r(this.nodes.value,this.isNum)}},a.radio=function(){},a.radio.prototype={fill:function(t,n){for(var r=e.getValue(this.template,this.field,null,t,n),i=this.nodes,a=i.length,s=""+r,l=0;a>l;l++)i[l].checked=!1,i[l].value===s&&(i[l].checked=!0)},clear:function(){for(var e=this.nodes,t=e.length,n=0;t>n;n++)e[n].checked=!1},fetch:function(){for(var e=this.nodes,t=e.length,n=0;t>n;n++)if(e[n].checked)return r(e[n].value,this.isNum)}},a.checkbox=function(){},a.checkbox.prototype={fill:function(t,n){var r=e.getValue(this.template,this.field,null,t,n),a=this.nodes,s=a.length;i(r)||(r=[r]);for(var l=0;s>l;l++){a[l].checked=!1;for(var o=0;r&&r.length>o;o++)a[l].value===""+r[o]&&(a[l].checked=!0)}},clear:function(){for(var e=this.nodes,t=e.length,n=0;t>n;n++)e[n].checked=!1},fetch:function(){for(var e=this.nodes,t=e.length,n=[],i=0;t>i;i++)e[i].checked&&n.push(r(e[i].value,this.isNum));return 1===t?n[0]:n}},a["select-multiple"]=function(){},a["select-multiple"].prototype={fill:function(t,n){for(var r=e.getValue(this.template,this.field,null,t,n),i=this.nodes.children,a=i.length,s=0;a>s;s++){i[s].setAttribute("selected",""),i[s].selected=!1;for(var l=0;r&&r.length>l;l++)i[s].value===r[l]&&(i[s].setAttribute("selected","true"),i[s].selected=!0)}},clear:function(){for(var e=this.nodes.children,t=e.length,n=0;t>n;n++)e[n].setAttribute("selected",""),e[n].selected=!1},fetch:function(){for(var e=this.nodes.children,t=e.length,n=[],i=0;t>i;i++)e[i].selected&&n.push(r(e[i].value,this.isNum));return n}}}(dt),function(e){"use strict";function t(e,t){var r=t.getAttribute("data-each");if(r)return e.handlers.push({template:e,node:t,fill:n.fill,clear:n.clear,field:r,item:t.children[0],empty:t.children[1],items:[]}),t.innerHTML="",t.removeAttribute("data-each"),!1}e.scanners.push(t);var n={fill:function(t,n){this.clear();var r=e.getValue(this.template,this.field,null,t,n);if(r&&0!==r.length)for(var i=0,a=r.length;a>i;i++){var s=this.items[i];s||(s=this.items[i]=e(this.item.cloneNode(!0),this.template.opts)),s.fill(r[i]),this.node.appendChild(s.node)}else this.empty&&this.node.appendChild(this.empty)},clear:function(){this.node.innerHTML=""}}}(dt);
//@ sourceMappingURL=domtemp.min.js.map