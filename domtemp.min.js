/*! domtemp @version 1.0.4 2013-05-26 */
/* @author: Li Chang Wei <lichangwei@love.com> */
/* @see https://github.com/lichangwei/domtemp */
(function(){"use strict";function e(e,t,n){"undefined"!=typeof jQuery&&t instanceof jQuery&&(t=t[0]),"string"==typeof t&&(t=document.querySelector(t)),e.node=t,e.opts=n,e.handlers=[]}function t(e,t){if(1===t.nodeType){for(var i=!0,r=0;l.length>r;r++){var s=l[r](e,t);s===!1&&(i=!1)}i&&n(e,t)}}function n(e,n){for(var i=n.children,r=0;i.length>r;r++)t(e,i[r])}function i(e,t){if(!e||!t)return null;var n,i=t.split("."),r=e;for(n=0;r&&i.length>n;n++)i[n]&&(r=r[i[n]]);return r}function r(e,t,n){if(e&&t){for(var i=t.split("."),r=e,s=0,o=i.length;o-1>s;s++)i[s]&&(r[i[s]]=r[i[s]]||{},r=r[i[s]]);r[i[o-1]]=n}return e}function s(e,t){e||(e={});for(var n in t)e[n]="object"==typeof e[n]&&"object"==typeof t[n]?s(e[n],t[n]):t[n];return e}var o=window.dt=function(n,i){return this instanceof o?(e(this,n,i||{}),t(this,this.node,this.placeholders),void 0):new o(n,i)};o.regexp=/\{\{\s*([\w\d\.]+)\s*:?\s*([^}]*)\}\}/gi,o.scanners=[];var a=o.util={getValue:function(e,t,n,r,s){var o=s[t];o||(o=s[t]=i(r,t));var a=e.opts[t];return"function"==typeof a?o=a(o,r):void 0!==a&&(o=a),n&&(o=n(o)),o},convert:function(e,t){return Function("val","return "+t)},hideNode:function(e){e._parent||(e._parent=e.parentNode),e._parent&&(e._replace||(e._replace=document.createTextNode("")),e._parent.replaceChild(e._replace,e))},showNode:function(e){e._parent&&e._replace&&e._parent.replaceChild(e,e._replace)},merge:s};o.prototype={fill:function(e,t){this.data=t&&this.data?s(this.data,e):e,this.hide();for(var n=0,i=this.handlers.length;i>n;n++){var r=this.handlers[n];r.fill(this.data,{})}return this.show()},append:function(e){return this.fill(e,!0)},fetch:function(){for(var e={},t=0,n=this.handlers.length;n>t;t++){var i=this.handlers[t];i.fetch&&r(e,i.field,i.fetch())}return e},clear:function(){this.data&&(this.data.length=0),this.hide();for(var e=0,t=this.handlers.length;t>e;e++){var n=this.handlers[e];n.clear()}return this.show()},hide:function(){return a.hideNode(this.node),this},show:function(){return a.showNode(this.node),this}},document.createElement("body");var l=o.scanners})(),function(e,t){"use strict";function n(e,t){var n=o?t.dataset:r(t);for(var s in n){var a=n[s];if("string"==typeof a){var l=i(e,t,s,n[s]);l&&(t.removeAttribute("data-"+s),e.handlers.push(l))}}}function i(n,i,r,s){var o=[];if(s.replace(e.regexp,function(e,n,i){o.push({field:n,match:e,convert:i?t.convert(n,i):void 0})}),0!==o.length){var l={fill:function(e,n){for(var a=s,l=0;o.length>l;l++){var u=o[l],c=t.getValue(this.template,u.field,u.convert,e,n);a=a.replace(u.match,c)}this.setAttribute(i,r,a)},clear:function(){this.setAttribute(i,r,"")},setAttribute:a[r]||a["*"],template:n};return l}}function r(e){for(var t=e.attributes,n={},i=0,r=t.length;r>i;i++){var s=t[i],o=s.nodeName;0===o.indexOf("data-")&&(n[o.substr(5)]=s.nodeValue)}return n}e.scanners.push(n);var s=document.documentElement,o=!!s.dataset,a=e.attributeSetter={value:"innerHTML"in s?function(e,t,n){e.innerHTML=n}:function(e,t,n){e.textContent=n},style:function(e,t,n){e.style.cssText=n},"class":function(e,t,n){e.className=n},indom:function(e,n,i){"true"===i?t.showNode(e):t.hideNode(e)},display:function(e,t,n){e.style.display="true"===n?"":"none"},"*":function(e,t,n){e.setAttribute(t,n)}}}(dt,dt.util),function(e,t){"use strict";function n(e,t){if(i(t)){var n=t.name;if(n){for(var r,s=t.type,a=t.getAttribute("number"),l=e.handlers,u=0;l.length>u;u++)l[u].field===n&&l[u].type===s&&(r=l[u]);r||(r=new(o[s]||o.normal),r.field=n,r.type=s,r.template=e,e.handlers.push(r)),r.isNum=r.isNum||"number"===s||"range"===s||null!==a,"radio"===s||"checkbox"===s?(r.nodes||(r.nodes=[]),r.nodes.push(t)):r.nodes=t}}}function i(e){if(!e.tagName)return!1;var t=e.tagName.toLowerCase();return-1!=="input textarea select".indexOf(t)&&-1==="image file button reset submit".indexOf(e.type)}function r(e,t){return t&&(e=parseInt(e,10)),e!==e?0/0:e}function s(e){return e&&"[object Array]"===Object.prototype.toString.call(e)}e.scanners.push(n);var o={};o.normal=function(){},o.normal.prototype={fill:function(e,n){var i=t.getValue(this.template,this.field,null,e,n);this.nodes.value=i||""},clear:function(){this.nodes.value=""},fetch:function(){return r(this.nodes.value,this.isNum)}},o.radio=function(){},o.radio.prototype={fill:function(e,n){for(var i=t.getValue(this.template,this.field,null,e,n),r=this.nodes,s=r.length,o=""+i,a=0;s>a;a++)r[a].checked=!1,r[a].value===o&&(r[a].checked=!0)},clear:function(){for(var e=this.nodes,t=e.length,n=0;t>n;n++)e[n].checked=!1},fetch:function(){for(var e=this.nodes,t=e.length,n=0;t>n;n++)if(e[n].checked)return r(e[n].value,this.isNum)}},o.checkbox=function(){},o.checkbox.prototype={fill:function(e,n){var i=t.getValue(this.template,this.field,null,e,n),r=this.nodes,o=r.length;s(i)||(i=[i]);for(var a=0;o>a;a++){r[a].checked=!1;for(var l=0;i&&i.length>l;l++)r[a].value===""+i[l]&&(r[a].checked=!0)}},clear:function(){for(var e=this.nodes,t=e.length,n=0;t>n;n++)e[n].checked=!1},fetch:function(){for(var e=this.nodes,t=e.length,n=[],i=0;t>i;i++)e[i].checked&&n.push(r(e[i].value,this.isNum));return 1===t?n[0]:n}},o["select-multiple"]=function(){},o["select-multiple"].prototype={fill:function(e,n){for(var i=t.getValue(this.template,this.field,null,e,n),r=this.nodes.children,s=r.length,o=0;s>o;o++){r[o].setAttribute("selected",""),r[o].selected=!1;for(var a=0;i&&i.length>a;a++)r[o].value===i[a]&&(r[o].setAttribute("selected","true"),r[o].selected=!0)}},clear:function(){for(var e=this.nodes.children,t=e.length,n=0;t>n;n++)e[n].setAttribute("selected",""),e[n].selected=!1},fetch:function(){for(var e=this.nodes.children,t=e.length,n=[],i=0;t>i;i++)e[i].selected&&n.push(r(e[i].value,this.isNum));return n}}}(dt,dt.util),function(e,t){"use strict";function n(e,n){var r=n.getAttribute("data-each");if(r){var s=r.split("|");r=s[0];var o=s[1]||"index";e.handlers.push({template:e,opts:t.merge(null,e.opts),node:n,fill:i.fill,clear:i.clear,field:r,index:o,item:n.children[0],empty:n.children[1],items:[]});var a=document.createRange();return a.selectNodeContents(n),a.deleteContents(),n.removeAttribute("data-each"),!1}}e.scanners.push(n);var i={fill:function(n,i){this.clear();var r=t.getValue(this.template,this.field,null,n,i);if(r&&0!==r.length)for(var s=0,o=r.length;o>s;s++){var a=this.items[s];a||(this.opts[this.index]=s,a=this.items[s]=e(this.item.cloneNode(!0),this.opts)),a.fill(r[s]),this.node.appendChild(a.node)}else this.empty&&this.node.appendChild(this.empty)},clear:function(){this.node.innerHTML=""}}}(dt,dt.util);
//@ sourceMappingURL=domtemp.min.js.map